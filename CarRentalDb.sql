CREATE DATABASE "CarRentalDb";

DROP TABLE IF EXISTS "Cars";
DROP TABLE IF EXISTS "Colors";
DROP TABLE IF EXISTS "Brands";

CREATE TABLE "Cars"
(
    "CarId"       INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    "BrandId"     INTEGER NOT NULL,
    "ColorId"     INTEGER NOT NULL,
    "ModelYear"   INTEGER NOT NULL,
    "DailyPrice"  INTEGER NOT NULL,
    "Description" TEXT    NOT NULL,
    CONSTRAINT PK_Car PRIMARY KEY ("CarId")
);

CREATE TABLE "Colors"
(
    "ColorId"   INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    "ColorName" TEXT    NOT NULL,
    CONSTRAINT PK_Color PRIMARY KEY ("ColorId"),
    CONSTRAINT UQ_Color UNIQUE ("ColorName")
);


CREATE TABLE "Brands"
(
    "BrandId"   INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    "BrandName" TEXT    NOT NULL,
    CONSTRAINT PK_Brand PRIMARY KEY ("BrandId"),
    CONSTRAINT UQ_Brand UNIQUE ("BrandName")
);

ALTER TABLE "Cars"
    ADD CONSTRAINT FK_Car_Brand FOREIGN KEY ("BrandId") REFERENCES "Brands" ("BrandId");
ALTER TABLE "Cars"
    ADD CONSTRAINT FK_Car_Color FOREIGN KEY ("ColorId") REFERENCES "Colors" ("ColorId");
